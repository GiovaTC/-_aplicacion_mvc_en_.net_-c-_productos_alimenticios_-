# -_aplicacion_mvc_en_.net_-c-_productos_alimenticios_- :.
üì¶ Aplicaci√≥n MVC en .NET C# ‚Äì Productos Alimenticios

<img width="1024" height="1024" alt="image" src="https://github.com/user-attachments/assets/816c7641-e517-4450-9e60-7848577e165d" />    

A continuaci√≥n se presenta una soluci√≥n profesional, clara y alineada a buenas pr√°cticas para una aplicaci√≥n MVC en .NET C# (ASP.NET MVC cl√°sico, no Core) desarrollada en Visual Studio 2022, que gestiona productos alimenticios y realiza un CRUD completo mediante un Procedimiento Almacenado en SQL Server .

üîπ Caracter√≠sticas Generales:

- Framework: ASP.NET MVC (no Core)
- Arquitectura: Modelo ‚Äì Vista ‚Äì Controlador (MVC)
- Acceso a Datos: ADO.NET + Stored Procedure
- Base de Datos: SQL Server
- IDE: Visual Studio 2022
```
1Ô∏è‚É£ Estructura del Proyecto (MVC)
ProductosAlimenticiosMVC
‚îÇ
‚îú‚îÄ‚îÄ Controllers
‚îÇ   ‚îî‚îÄ‚îÄ ProductoController.cs
‚îÇ
‚îú‚îÄ‚îÄ Models
‚îÇ   ‚îî‚îÄ‚îÄ Producto.cs
‚îÇ
‚îú‚îÄ‚îÄ Data
‚îÇ   ‚îî‚îÄ‚îÄ ProductoDAO.cs
‚îÇ
‚îú‚îÄ‚îÄ Views
‚îÇ   ‚îî‚îÄ‚îÄ Producto
‚îÇ       ‚îú‚îÄ‚îÄ Index.cshtml
‚îÇ       ‚îú‚îÄ‚îÄ Create.cshtml
‚îÇ       ‚îú‚îÄ‚îÄ Edit.cshtml
‚îÇ       ‚îî‚îÄ‚îÄ Delete.cshtml
‚îÇ
‚îî‚îÄ‚îÄ Web.config
```
2Ô∏è‚É£ Base de Datos ‚Äì SQL Server
üìÑ Tabla PRODUCTO
```
CREATE TABLE PRODUCTO (
    ID_PRODUCTO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOMBRE VARCHAR2(100),
    CATEGORIA VARCHAR2(50),
    PRECIO NUMBER(10,2),
    STOCK NUMBER,
    FECHA_VENCIMIENTO DATE
);
```
3Ô∏è‚É£ Procedimiento Almacenado ‚Äì CRUD
```
CREATE OR REPLACE PROCEDURE SP_PRODUCTO_CRUD (
    P_OPCION           IN NUMBER,
    P_ID_PRODUCTO      IN NUMBER DEFAULT NULL,
    P_NOMBRE           IN VARCHAR2 DEFAULT NULL,
    P_CATEGORIA        IN VARCHAR2 DEFAULT NULL,
    P_PRECIO           IN NUMBER DEFAULT NULL,
    P_STOCK            IN NUMBER DEFAULT NULL,
    P_FECHA_VENCIMIENTO IN DATE DEFAULT NULL,
    P_CURSOR           OUT SYS_REFCURSOR
) AS
BEGIN

    -- 1Ô∏è‚É£ CONSULTAR
    IF P_OPCION = 1 THEN
        OPEN P_CURSOR FOR
            SELECT * FROM PRODUCTO;

    -- 2Ô∏è‚É£ INSERTAR
    ELSIF P_OPCION = 2 THEN
        INSERT INTO PRODUCTO (
            NOMBRE, CATEGORIA, PRECIO, STOCK, FECHA_VENCIMIENTO
        ) VALUES (
            P_NOMBRE, P_CATEGORIA, P_PRECIO, P_STOCK, P_FECHA_VENCIMIENTO
        );

        COMMIT;

    -- 3Ô∏è‚É£ ACTUALIZAR
    ELSIF P_OPCION = 3 THEN
        UPDATE PRODUCTO
        SET
            NOMBRE = P_NOMBRE,
            CATEGORIA = P_CATEGORIA,
            PRECIO = P_PRECIO,
            STOCK = P_STOCK,
            FECHA_VENCIMIENTO = P_FECHA_VENCIMIENTO
        WHERE ID_PRODUCTO = P_ID_PRODUCTO;

        COMMIT;

    -- 4Ô∏è‚É£ ELIMINAR
    ELSIF P_OPCION = 4 THEN
        DELETE FROM PRODUCTO
        WHERE ID_PRODUCTO = P_ID_PRODUCTO;

        COMMIT;
    END IF;

END SP_PRODUCTO_CRUD;
/
```
4Ô∏è‚É£ Modelo ‚Äì Producto.cs
```
using System;


namespace ProductosAlimenticiosMVC.Models
{
    public class Producto
    {
        public int IdProducto { get; set; }
        public string Nombre { get; set; }
        public string Categoria { get; set; }
        public decimal Precio { get; set; }
        public int Stock { get; set; }
        public DateTime FechaVencimiento { get; set; }
    }
}
```
5Ô∏è‚É£ Acceso a Datos (DAO) ‚Äì ProductoDAO.cs
```
using System.Collections.Generic;


namespace ProductosAlimenticiosMVC.Data
{
    public class ProductoDAO
    {
        string cadena = "Data Source=localhost;Initial Catalog=ALIMENTOS_DB;Integrated Security=True";


        public List<Producto> Listar()
        {
            List<Producto> lista = new List<Producto>();


            using (SqlConnection cn = new SqlConnection(cadena))
            {
                SqlCommand cmd = new SqlCommand("SP_PRODUCTO_CRUD", cn);
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Parameters.AddWithValue("@OPCION", 1);


                cn.Open();
                SqlDataReader dr = cmd.ExecuteReader();


                while (dr.Read())
                {
                    lista.Add(new Producto
                    {
                        IdProducto = (int)dr["ID_PRODUCTO"],
                        Nombre = dr["NOMBRE"].ToString(),
                        Categoria = dr["CATEGORIA"].ToString(),
                        Precio = (decimal)dr["PRECIO"],
                        Stock = (int)dr["STOCK"],
                        FechaVencimiento = (DateTime)dr["FECHA_VENCIMIENTO"]
                    });
                }
            }
            return lista;
        }


        public void EjecutarSP(int opcion, Producto p)
        {
            using (SqlConnection cn = new SqlConnection(cadena))
            {
                SqlCommand cmd = new SqlCommand("SP_PRODUCTO_CRUD", cn);
                cmd.CommandType = CommandType.StoredProcedure;


                cmd.Parameters.AddWithValue("@OPCION", opcion);
                cmd.Parameters.AddWithValue("@ID_PRODUCTO", p.IdProducto);
                cmd.Parameters.AddWithValue("@NOMBRE", p.Nombre);
                cmd.Parameters.AddWithValue("@CATEGORIA", p.Categoria);
                cmd.Parameters.AddWithValue("@PRECIO", p.Precio);
                cmd.Parameters.AddWithValue("@STOCK", p.Stock);
                cmd.Parameters.AddWithValue("@FECHA_VENCIMIENTO", p.FechaVencimiento);


                cn.Open();
                cmd.ExecuteNonQuery();
            }
        }
    }
}
```
6Ô∏è‚É£ Controlador ‚Äì ProductoController.cs
```
using System.Web.Mvc;
using ProductosAlimenticiosMVC.Data;
using ProductosAlimenticiosMVC.Models;


namespace ProductosAlimenticiosMVC.Controllers
{
    public class ProductoController : Controller
    {
        ProductoDAO dao = new ProductoDAO();


        public ActionResult Index()
        {
            return View(dao.Listar());
        }


        public ActionResult Create()
        {
            return View();
        }


        [HttpPost]
        public ActionResult Create(Producto p)
        {
            dao.EjecutarSP(2, p);
            return RedirectToAction("Index");
        }


        public ActionResult Edit(Producto p)
        {
            return View(p);
        }


        [HttpPost]
        public ActionResult EditConfirm(Producto p)
        {
            dao.EjecutarSP(3, p);
            return RedirectToAction("Index");
        }


        public ActionResult Delete(Producto p)
        {
            dao.EjecutarSP(4, p);
            return RedirectToAction("Index");
        }
    }
}
```
7Ô∏è‚É£ Vista Principal ‚Äì Index.cshtml
```
@model IEnumerable<ProductosAlimenticiosMVC.Models.Producto>


<h2>Productos Alimenticios</h2>


<p>
    @Html.ActionLink("Nuevo Producto", "Create")
</p>


<table class="table">
    <tr>
        <th>Nombre</th>
        <th>Categor√≠a</th>
        <th>Precio</th>
        <th>Stock</th>
        <th>Vence</th>
        <th>Acciones</th>
    </tr>


@foreach (var p in Model)
{
    <tr>
        <td>@p.Nombre</td>
        <td>@p.Categoria</td>
        <td>@p.Precio</td>
        <td>@p.Stock</td>
        <td>@p.FechaVencimiento.ToShortDateString()</td>
        <td>
            @Html.ActionLink("Editar", "Edit", p) |
            @Html.ActionLink("Eliminar", "Delete", p)
        </td>
    </tr>
}
</table>
```
‚úÖ Resultado Final
- ‚úî Aplicaci√≥n MVC clara y mantenible
- ‚úî CRUD completo mediante Stored Procedure
- ‚úî Separaci√≥n correcta de capas
- ‚úî Compatible con Visual Studio 2022
- ‚úî Preparada para validaciones, seguridad y reportes / .
